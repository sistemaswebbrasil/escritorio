import{af as Z,ag as $,ao as ee,at as ae,f as g,ay as s,bq as te,ax as se,az as oe,b as o,F as re,y as v}from"./index-JShR_LJD.js";import{m as le,a as ne,b as ue,c as de,d as ce,e as ie,f as pe,u as me,p as ge,g as ve,h as be,i as Pe,j as Se,k as he,l as fe,n as _,o as V,q as x}from"./VDataTable-Xy_8Felp.js";import{V as A}from"./VTable-n6mHFrlI.js";var Te={VITE_API_BASE_URL:"/admin",VITE_API_BASE_API:"",BASE_URL:"/",MODE:"pro",DEV:!1,PROD:!0,SSR:!1};const I=Z(),ye=Te.VITE_UNSPLASH_ACCESS_KEY,n=$.create({baseURL:"https://api.unsplash.com",timeout:2e4,headers:{Authorization:"Client-ID "+ye}});n.interceptors.response.use(e=>e,e=>{if(e.response){e.response.status;const i=e.response.data;I.showErrorMessage(i.errors[0])}else I.showErrorMessage("Network Error");return Promise.reject(e)});const xe=e=>n.get("/topics",{params:e}),Ae=e=>n.get("/search/photos",{params:e}),Ie=e=>n.get("/search/collections",{params:e}),we=e=>n.get("/search/users",{params:e}),De=ee({itemsLength:{type:[Number,String],required:!0},...le(),...ne(),...ue()},"VDataTableServer"),Be=ae()({name:"VDataTableServer",props:De(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,i){let{attrs:w,slots:a}=i;const{groupBy:u}=de(e),{sortBy:r,multiSort:B,mustSort:R}=ce(e),{page:d,itemsPerPage:p}=ie(e),k=g(()=>parseInt(e.itemsLength,10)),{columns:b,headers:C}=pe(e,{groupBy:u,showSelect:s(e,"showSelect"),showExpand:s(e,"showExpand")}),{items:c}=me(e,b),{toggleSort:P}=ge({sortBy:r,multiSort:B,mustSort:R,page:d}),{opened:L,isGroupOpen:F,toggleGroup:G,extractRows:N}=ve({groupBy:u,sortBy:r}),{pageCount:H,setItemsPerPage:U}=be({page:d,itemsPerPage:p,itemsLength:k}),{flatItems:S}=Pe(c,u,L),{isSelected:O,select:q,selectAll:M,toggleSelect:j,someSelected:z,allSelected:K}=Se(e,{allItems:c,currentPage:c}),{isExpanded:Y,toggleExpand:W}=he(e),h=g(()=>N(c.value));fe({page:d,itemsPerPage:p,sortBy:r,groupBy:u,search:s(e,"search")}),te("v-data-table",{toggleSort:P,sortBy:r}),se({VDataTableRows:{hideNoData:s(e,"hideNoData"),noDataText:s(e,"noDataText"),loading:s(e,"loading"),loadingText:s(e,"loadingText")}});const t=g(()=>({page:d.value,itemsPerPage:p.value,sortBy:r.value,pageCount:H.value,toggleSort:P,setItemsPerPage:U,someSelected:z.value,allSelected:K.value,isSelected:O,select:q,selectAll:M,toggleSelect:j,isExpanded:Y,toggleExpand:W,isGroupOpen:F,toggleGroup:G,items:h.value.map(m=>m.raw),internalItems:h.value,groupedItems:S.value,columns:b.value,headers:C.value}));oe(()=>{const m=_.filterProps(e),J=V.filterProps(e),Q=x.filterProps(e),X=A.filterProps(e);return o(A,v({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},X),{top:()=>{var l;return(l=a.top)==null?void 0:l.call(a,t.value)},default:()=>{var l,f,T,y,D,E;return a.default?a.default(t.value):o(re,null,[(l=a.colgroup)==null?void 0:l.call(a,t.value),o("thead",{class:"v-data-table__thead",role:"rowgroup"},[o(V,v(J,{sticky:e.fixedHeader}),a)]),(f=a.thead)==null?void 0:f.call(a,t.value),o("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(T=a["body.prepend"])==null?void 0:T.call(a,t.value),a.body?a.body(t.value):o(x,v(w,Q,{items:S.value}),a),(y=a["body.append"])==null?void 0:y.call(a,t.value)]),(D=a.tbody)==null?void 0:D.call(a,t.value),(E=a.tfoot)==null?void 0:E.call(a,t.value)])},bottom:()=>a.bottom?a.bottom(t.value):o(_,m,{prepend:a["footer.prepend"]})})})}});export{Be as V,Ae as a,Ie as b,xe as g,we as s};
